<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOMBA</title>
</head>
<body>
    <h1 id="efeito" style="font-size: 50px;"></h1>
    <h3 id="status" style="text-align: center; color: green; font-size: 50px; font-weight: lighter;"></h3>
    <div id="contagem" style="color: red; text-align: center; font-size: 100px; font-weight: lighter;" ></div>
    <h3 id="cabum" style="text-align: center; color: red; font-size: 170px; font-weight: lighter"></h3>
</body>
<script>
    const efeito = document.getElementById("efeito");
    const status = document.getElementById("status");
    const contagem = document.getElementById("contagem");
    const cabum = document.getElementById("cabum");

    let resposta, i, time;
    do {
        resposta = prompt("Armar a bomba? Digite 'sim' ou 'não'").toLowerCase();
        if ((resposta !== "sim") && (resposta !== "não"))
            alert("Resposta inválida. Digite 'sim' ou 'não'")
    } while((resposta !== "sim") && (resposta !== "não"))

    if (resposta === "sim") {
        do {
            time = parseInt(prompt("Digite o tempo para a bomba explodir em segundos: "))
                if (isNaN(time))
                    alert("Resposta inválida. Digite um número")
        } while (isNaN(time))
    }

    async function explodir(x) {
        efeito.innerHTML = "PREPARANDO BOMBA";
        await sleep(700);
        efeito.innerHTML = "PREPARANDO BOMBA.";
        await sleep(700);
        efeito.innerHTML = "PREPARANDO BOMBA..";
        await sleep(700);
        efeito.innerHTML = "PREPARANDO BOMBA...";
        await sleep(700);
        if (resposta === "sim") {
            status.innerHTML = "BOMBA ARMADA";
            for (i = x; i >= 0; i--) {
                contagem.innerHTML = `Faltam ${i} segundos`;
                await sleep(1000);
                if (i === 0) {
                    status.innerHTML = "";
                    contagem.innerHTML = "";
                    cabum.innerHTML = "BOMBA EXPLODIU";
                    document.body.style.backgroundColor = "black";
                }
            }
        }
        else
            status.innerHTML = "BOMBA NÃO FOI ARMADA";
    }

    function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms))
    }

    explodir(time);

</script>
</html>